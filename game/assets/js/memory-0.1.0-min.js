(function(f,b){var a=f.document,d;d=function(){var d={},m=!1,p=[],g,l,k,u,t,q,r,j,s,n,v,x;x=function(){var c,e,d=!1,j=a.createElement("fakeelement"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(c in g)if(j.style[c]!==b){e=g[c];d=!0;break}return{type:e,supported:d}};g=function(c){return a.getElementById(c)};d={labels:{ok:"OK",cancel:"Cancel"},delay:5E3,buttonReverse:!1,buttonFocus:"ok",transition:b,addListeners:function(c){var e=
"undefined"!==typeof k,d="undefined"!==typeof l,b="undefined"!==typeof v,j="",g=this,p,n,f,s,h;p=function(e){"undefined"!==typeof e.preventDefault&&e.preventDefault();f(e);"undefined"!==typeof v&&(j=v.value);"function"===typeof c&&("undefined"!==typeof v?c(!0,j):c(!0));return!1};n=function(e){"undefined"!==typeof e.preventDefault&&e.preventDefault();f(e);"function"===typeof c&&c(!1);return!1};f=function(){g.hide();g.unbind(a.body,"keyup",s);g.unbind(u,"focus",h);e&&g.unbind(k,"click",p);d&&g.unbind(l,
"click",n)};s=function(c){var e=c.keyCode;(32===e&&!b||b&&13===e)&&p(c);27===e&&d&&n(c)};h=function(){b?v.focus():!d||g.buttonReverse?k.focus():l.focus()};this.bind(u,"focus",h);this.bind(t,"focus",h);e&&this.bind(k,"click",p);d&&this.bind(l,"click",n);this.bind(a.body,"keyup",s);this.transition.supported||this.setFocus()},bind:function(c,e,a){"function"===typeof c.addEventListener?c.addEventListener(e,a,!1):c.attachEvent&&c.attachEvent("on"+e,a)},handleErrors:function(){if("undefined"!==typeof f.onerror){var c=
this;f.onerror=function(e,a,d){c.error("["+e+" on line "+d+" of "+a+"]",0)};return!0}return!1},appendButtons:function(c,e){return this.buttonReverse?e+c:c+e},build:function(c){var e=c.type,a=c.message,b=c.cssClass||"";c='<div class="alertify-dialog"><a id="alertify-resetFocusBack" class="alertify-resetFocus" href="#">Reset Focus</a>';"none"===d.buttonFocus&&(c+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>');"prompt"===e&&(c+='<div id="alertify-form">');c+='<article class="alertify-inner">';
c+='<p class="alertify-message">{{message}}</p>'.replace("{{message}}",a);"prompt"===e&&(c+='<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>');c+='<nav class="alertify-buttons">{{buttons}}</nav>';c+="</article>";"prompt"===e&&(c+="</div>");c+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>';c+="</div>";switch(e){case "confirm":c=c.replace("{{buttons}}",this.appendButtons('<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>',
'<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>'));c=c.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case "prompt":c=c.replace("{{buttons}}",this.appendButtons('<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>','<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>'));c=c.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);
break;case "alert":c=c.replace("{{buttons}}",'<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>'),c=c.replace("{{ok}}",this.labels.ok)}s.className="alertify alertify-"+e+" "+b;j.className="alertify-cover";return c},close:function(c,e){var a=e&&!isNaN(e)?+e:this.delay,d=this,b,j;this.bind(c,"click",function(){b(c)});j=function(c){c.stopPropagation();d.unbind(this,d.transition.type,j);n.removeChild(this);n.hasChildNodes()||(n.className+=" alertify-logs-hidden")};b=
function(c){"undefined"!==typeof c&&c.parentNode===n&&(d.transition.supported?(d.bind(c,d.transition.type,j),c.className+=" alertify-log-hide"):(n.removeChild(c),n.hasChildNodes()||(n.className+=" alertify-logs-hidden")))};0!==e&&setTimeout(function(){b(c)},a)},dialog:function(c,e,d,b,g){r=a.activeElement;var k=function(){(!(n&&null!==n.scrollTop)||!(j&&null!==j.scrollTop))&&k()};if("string"!==typeof c)throw Error("message must be a string");if("string"!==typeof e)throw Error("type must be a string");
if("undefined"!==typeof d&&"function"!==typeof d)throw Error("fn must be a function");this.init();k();p.push({type:e,message:c,callback:d,placeholder:b,cssClass:g});m||this.setup();return this},extend:function(c){if("string"!==typeof c)throw Error("extend method must have exactly one paramter");return function(e,a){this.log(e,c,a);return this}},hide:function(){var c,e=this;p.splice(0,1);0<p.length?this.setup(!0):(m=!1,c=function(a){a.stopPropagation();e.unbind(s,e.transition.type,c)},this.transition.supported?
(this.bind(s,this.transition.type,c),s.className="alertify alertify-hide alertify-hidden"):s.className="alertify alertify-hide alertify-hidden alertify-isHidden",j.className="alertify-cover alertify-cover-hidden",r.focus())},init:function(){a.createElement("nav");a.createElement("article");a.createElement("section");null==g("alertify-cover")&&(j=a.createElement("div"),j.setAttribute("id","alertify-cover"),j.className="alertify-cover alertify-cover-hidden",a.body.appendChild(j));null==g("alertify")&&
(m=!1,p=[],s=a.createElement("section"),s.setAttribute("id","alertify"),s.className="alertify alertify-hidden",a.body.appendChild(s));null==g("alertify-logs")&&(n=a.createElement("section"),n.setAttribute("id","alertify-logs"),n.className="alertify-logs alertify-logs-hidden",a.body.appendChild(n));a.body.setAttribute("tabindex","0");this.transition=x()},log:function(c,e,a){var d=function(){n&&null!==n.scrollTop||d()};this.init();d();n.className="alertify-logs";this.notify(c,e,a);return this},notify:function(c,
e,d){var b=a.createElement("article");b.className="alertify-log"+("string"===typeof e&&""!==e?" alertify-log-"+e:"");b.innerHTML=c;n.appendChild(b);setTimeout(function(){b.className+=" alertify-log-show"},50);this.close(b,d)},set:function(c){var e;if("object"!==typeof c&&c instanceof Array)throw Error("args must be an object");for(e in c)c.hasOwnProperty(e)&&(this[e]=c[e])},setFocus:function(){v?(v.focus(),v.select()):q.focus()},setup:function(c){var e=p[0],a=this,j;m=!0;j=function(c){c.stopPropagation();
a.setFocus();a.unbind(s,a.transition.type,j)};this.transition.supported&&!c&&this.bind(s,this.transition.type,j);s.innerHTML=this.build(e);u=g("alertify-resetFocus");t=g("alertify-resetFocusBack");k=g("alertify-ok")||b;l=g("alertify-cancel")||b;q="cancel"===d.buttonFocus?l:"none"===d.buttonFocus?g("alertify-noneFocus"):k;v=g("alertify-text")||b;g("alertify-form");"string"===typeof e.placeholder&&""!==e.placeholder&&(v.value=e.placeholder);c&&this.setFocus();this.addListeners(e.callback)},unbind:function(c,
a,d){"function"===typeof c.removeEventListener?c.removeEventListener(a,d,!1):c.detachEvent&&c.detachEvent("on"+a,d)}};return{alert:function(c,a,b){d.dialog(c,"alert",a,"",b);return this},confirm:function(c,a,b){d.dialog(c,"confirm",a,"",b);return this},extend:d.extend,init:d.init,log:function(c,a,b){d.log(c,a,b);return this},prompt:function(c,a,b,j){d.dialog(c,"prompt",a,b,j);return this},success:function(c,a){d.log(c,"success",a);return this},error:function(c,a){d.log(c,"error",a);return this},set:function(c){d.set(c)},
labels:d.labels,debug:d.handleErrors}};"function"===typeof define?define([],function(){return new d}):"undefined"===typeof f.alertify&&(f.alertify=new d)})(this);
(function(f){var b,a=void 0,d=function(a){g.log("Ending load process:",a);q.hasOwnProperty(a)&&(q[a].clear(),q[a]=null,delete q[a],r-=1)},h=function(){function b(j){var l=null,t=null,y=p,z=p;if(j.name&&"string"===typeof j.name)l=j.name,k.hasOwnProperty(l)&&g.warn("Duplicated names found. Overwriting",l);else throw Error("Missing or invalid name property. Check your image(s) object(s)");if(j.src&&"string"===typeof j.src)t=j.src;else throw Error("Missing or invalid src property. Check your image(s) object(s)");
j.onload&&"function"===typeof j.onload&&(y=j.onload);j.onerror&&"function"===typeof j.onerror&&(z=j.onerror);h[l]=new Image;h[l].name=l;h[l].onload=function(){var b=l,j=y;m+=1;k[b]=h[b];u+=1;g.log(h[b].src,"  loaded");j.call(k[b]);r.call(a,f.getProgress());m===c?(q=!1,d(n),g.log("Load process",n,"done with no errors."),w.call(a,{code:1,errors:0})):m+e===c&&(q=!1,d(n),g.warn("Load process",n,"done with",e,"errors"),w.call(a,{code:0,errors:e}))};h[l].onerror=function(b){e+=1;z.call(this,b);m+e===c&&
(q=!1,w.call(a,{code:0,errors:e}),g.warn("Load process",n,"done with",e,"errors"),d(n))};h[l].src=t}var f=this,n="#"+l.generate(),h={},m=0,c=0,e=0,q=!1,r=p,w=p;this.getId=function(){return n};this.getProgress=function(){return 100*(m/c)};this.isLoading=function(){return q};this.clear=function(){for(var a in h)h.hasOwnProperty(a)&&(h[a]=null,delete h[a]);q=e=c=m=h=f=null};this.load=function(a,d,e){var l;if(!q){m=0;q=!0;g.log("Load process",n,"started.");try{if(r=e||p,w=d||p,a instanceof Array){c=a.length;
t+=c;for(l=0;l<c;l+=1)b(a[l])}else c+=1,t+=1,b(a)}catch(k){g.warn(k.message)}finally{}}return this}},m=function(){return 0===r},p=function(){},g,l,k,u,t,q,r;g=new function(a,b){var d=function(){};this.warn=this.log=this.info=this.error=d;if(!f.console||"undefined"===typeof f.console)return this;switch(b){case 0:return this.warn=this.log=this.info=this.error=d,this;case 1:return console.info("[JSDebugger]",a,"MODE: Logs and Info only"),this.error=d,this.info=console.info.bind(console,a),this.log=console.log.bind(console,
a),this.warn=d,this;case 2:return console.info("[JSDebugger]",a,"MODE: Errors only"),this.error=console.error.bind(console,a),this.warn=this.log=this.info=d,this;default:return console.info("[JSDebugger]",a,"MODE: Verbose"),this.error=console.error.bind(console,a),this.info=console.info.bind(console,a),this.log=console.log.bind(console,a),this.warn=console.warn.bind(console,a),this}}("[ImageManager]",0);l=new function(){var a=0;this.generate=function(){return a+=1}};k={};t=u=0;q={};r=0;b={load:function(a,
b,d){var g=new h;q[g.getId()]=g.load(a,b,d);r+=1},getProgress:function(){return 100*(u/t)},hasFinished:m,getImage:function(a){if(k.hasOwnProperty(a))return k[a]},cloneImage:function(a){var b=new Image;if(k.hasOwnProperty(a))return b.name=k[a].name,b.src=k[a].src,b},clear:function(){var a,b;if(m()){for(a in k)k.hasOwnProperty(a)&&(k[a]=null,delete k[a]);for(b in q)q.hasOwnProperty(b)&&(q[b].clear(),q[b]=null,delete q[b]);t=r=u=0;return!0}return!1},cache:k,remove:function(a){k.hasOwnProperty(a)&&(k[a]=
null,delete k[a]);u-=1;t-=1}};"function"===typeof define?define([],function(){return b}):"undefined"!==typeof module&&module.exports?module.exports=b:"undefined"===typeof f.ImageManager&&(f.ImageManager=b)})(function(){return this}());
(function(f,b){var a;a={mod:"development",version:"0.1.0",Board:b,Card:b,system:b,events:b,dom:b,ui:b,utils:b,debug:alertify.debug};"function"===typeof define?define([],function(){return a}):"undefined"!==typeof module&&module.exports?module.exports=a:"undefined"===typeof f.game&&(f.game=a)})(function(){return this}.call());
(function(f,b,a){var d=f.document,h="createTouch"in d||"ontouchstart"in f||f.DocumentTouch&&d instanceof DocumentTouch,m="undefined"!==typeof f.localStorage,p="undefined"!==typeof d.createElement("canvas").getContext,g=d.createElement("audio"),h={touchSupported:h,localStorageSupported:m,canvasSupported:p,audioSupported:"undefined"!==typeof g.canPlayType,rafSupported:function(){var a=["ms","moz","webkit","o"];if(f.requestAnimationFrame)return!0;for(var b=0;b<a.length;++b)if(f[a[b]+"RequestAnimationFrame"])return!0;
return!1}(),getTransitionEvent:function(){var b,g,p=!1,h=d.createElement("fakeelement"),f={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(b in f)if(h.style[b]!==a){g=f[b];p=!0;break}return{type:g,supported:p}}};b.system=h})(function(){return this}.call(),function(){return this}.call().game);
(function(f){var b={};f.events={dispatchEvent:function(a,d){for(var h=b[a],f=h?h.length:0;f--;)h[f].apply(this,d||[])},addEventListener:function(a,d){b[a]||(b[a]=[]);b[a].push(d);return[a,d]},removeEventListener:function(a,d){var f=b[d?a:a[0]];d=d||a[1];for(var m=f?f.length:0;m--;)f[m]===d&&f.splice(m,1)}}})(function(){return this}.call().game);
(function(f){f.dom={removeChilds:function(b){for(var a;a=b.lastChild;)b.removeChild(a)}};f.ui={fullScreen:!1,toggleFullScreen:function(){var b=document.documentElement,a=b.requestFullScreen||b.webkitRequestFullScreen||b.mozRequestFullScreen||b.oRequestFullScreen||b.msRequestFullScreen;this.fullscreen?(document.webkitCancelFullScreen(),this.fullscreen=!1):(a.call(b),this.fullscreen=!0)},reset:function(){alertify.set({labels:{ok:"OK",cancel:"Cancel"},delay:2200,buttonReverse:!1,buttonFocus:"ok"})},
log:function(b,a){this.reset();alertify.set({delay:a||2200});alertify.log(b)},alert:function(b,a,d){this.reset();alertify.set({delay:d||2200});alertify.alert(b,a)}};f.utils={shuffle:function(b){for(var a=b.length,d,f;a--;)f=Math.random()*(a+1)|0,d=b[a],b[a]=b[f],b[f]=d;return b},remove:function(b,a,d){var f=1;"undefined"!==typeof d&&(f=d);b.splice(a,f)},removeObject:function(b,a){var d=this.indexOf(a,0);-1==d||this.splice(d,1)}}})(function(){return this}.call().game);
(function(f){function b(a,b,f){var m,p,g,l,k;m=document.createElement("div");m.className="flip-container";m.name=a;p=document.createElement("div");p.className="flipper";k=document.createElement("div");k.className="animator";g=document.createElement("div");g.className="front";l=new Image;l.src=b;l.className="card-face";g.appendChild(l);b=document.createElement("div");b.className="back";l=new Image;l.src=f;l.className="card-face";b.appendChild(l);p.appendChild(g);p.appendChild(b);k.appendChild(p);m.appendChild(k);
this.node=m;this.name=a;this.done=this.hold=!1;return this}b.prototype.flip=function(){!this.hold&&!this.done&&this.node.classList.toggle("flip")};b.prototype.found=function(){this.done=!0;setTimeout(function(){this.node.classList.toggle("animate")}.bind(this),800)};b.prototype.block=function(){this.hold=!0};b.prototype.release=function(){this.hold=!1};f.Card=b})(function(){return this}.call().game);
(function(f,b){function a(a,g,f,k){this.container=a;this.board=b.createElement("table");this.backBoard=[];var h,m,q,r;this.board.className="game-board";if(f*k<g.length)throw Error("configuracoes invalidas");for(a=0;a<f;a++){this.backBoard[a]=[];m=this.board.insertRow(a);for(h=0;h<k;h++)this.backBoard[a][h]=r=g.pop(),q=m.insertCell(h),q.appendChild(r.node),d?q.addEventListener("touchstart",this.onClick,!1):q.addEventListener("mousedown",this.onClick,!1)}this.container.appendChild(this.board);return this}
var d=f.system.touchSupported,h=f.events,m=f.dom;a.prototype.destroy=function(){m.removeChilds(this.container);this.backBoard=this.board=null};a.prototype.getTableElement=function(){return this.board};a.prototype.getBoard=function(){return this.backBoard};a.prototype.flipAllCards=function(a){var b,d;setTimeout(function(){for(b=0;b<this.backBoard.length;b++)for(d=0;d<this.backBoard[b].length;d++)this.backBoard[b][d].flip()}.bind(this),a)};a.prototype.fadeIn=function(){setTimeout(function(){this.board.classList.toggle("fadeIn")}.bind(this),
1)};a.prototype.getCardsByName=function(a){var b,d,f,h=[];for(b=0;b<this.backBoard.length;b++)for(d=0;d<this.backBoard[b].length;d++)if(f=this.backBoard[b][d],f.name===a)return h.push(f);return h};a.prototype.getCard=function(a){return this.backBoard[a.parentNode.rowIndex][a.cellIndex]};a.prototype.onClick=function(a){h.dispatchEvent("cellclick",[{event:a,cell:this,preventDefault:a.preventDefault.bind(a)}])};f.Board=a})(function(){return this}.call().game,function(){return this}.call().document);
